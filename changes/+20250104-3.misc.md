Fixed various code quality issues identified by ruff linter, including improved string formatting and file handling.